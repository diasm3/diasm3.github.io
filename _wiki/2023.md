---
layout  : wiki
title   : 2023년 메모 
summary : 
date    : 2022-03-20 14:56:40 +0900
updated : 2023-06-07 10:02:27 +0900
tag     : 
toc     : true
public  : true
parent  : [[diary]]
latex   : false
---
* [[TOC]]
{:toc}

## 2023-06-09 09:41:00
### 국가의 부름
- 민방위다. 하지만 코딩은 매일 해야지.

## 2023-06-07 18:29:00
### 노티는 어려워
- 서버 작업하는데 노티가 왜이리 어려운건지 나만 어려운건지 굉장히 복잡해서 미쳐버릴거 같다. 2개의 서버에서 FCM으로 쏘면서 mysql에 저장되는데 각 일반유져, 비즈유져(2가지) 각각에 대한 조건들을 다 설정해 줘야 한다. 
- 양방향으로 쏘는거라 to, from이 x2씩 된다. 좋은 방법이 없을까? 
  

## 2023-06-06 10:12:00
### 테니스
- 운동신경이 없는건 알지만 맨날 느낌이 오다 말다... 이상한 운동이다. 골프도 마찬가지고... 그냥 그렇다...

### 항해 파트
- EB(ElasticBeanstalk)셋팅방법을 알려드렸다. 이번에는 윈도우다. 잊어버리기전에 적어 놓자
1. AMD 데스크탑이었다. 가상화 설정을 CMOS 셋업에서 해줘야한다.
2. docker desktop 설치해야한다. 에러가난다. wsl을 설치 안했단다. 설치해주자.
3. 다운이 안된다. DNS를 8.8.8.8 로 변경하니 잘 다운이 되었다.
4. wsl --update 해주고default를 version2로 설정해준다. 앞서 Ubuntu가 설치가 되어 있어야한다.
5. 이제 Eb-cli를 설치 한다. ( 이미 설치가 되어 있어서 시간이 많이 줄었다.)
6. aws 에가서 secret key랑 설정을 해준다. ~/.aws/config 에서 설정해주는걸로 안다.
7. eb 명령어로 잘 되는지 확인한다.
8. aws console에가서 eb 환경 설정으로 시작한다.
9. 중요한건 두가지 ELB(elastic Load Balancer)설정, public 오픈하는 체크박스를 선택해야 한다. 그리고 배포 설정은 docker 로 한다.
10. 소스 코드로 돌아와서 Dockerfile을 만든다. expose 3000은 잊지 말자.
11. 대부분 실수 하는부분이 CMD ["node", "app.js"]를 할때 CMD ["npm", "start"] 할때가 있다. 이럴때는 package.json 에 설정완료가 되어 있어야한다.
12. eb local run 으로 실행이 되는지 확인하다. 
[[13]]. eb deploy 를 한다.

- 내용을 이렇게 적어놨지만 어차피 엄청난 시행착오를 감안해야할 것이다. 나는 처음에 일주일 걸렸던거 같다.
- 정말 DevOps가 준비가 안되면 Cors, setcookie등 여러 문제가 발생한다.



## 2023-06-05 06:58:00
### 오늘은 판교에서 전기자전거 타고 출근완료
- 일요일을 충분히 쉰덕분에 아침 일찍 일어났다. 지난 주에는 지나가면서 전기자전거를 봤는데 한번도 타보질 않아서 다음에 기회가 되면 타보려고 생각했는데 바로 오늘 시간도 널널하게 판교역 현대백화점에서 카카오바이크를 빌리고 제2판교까지 타고 왔다. 새벽바람이 약간 차게 느껴졌지만 조금 타니까 살짝 땀이 나려는 순간 바람이 식혀줘서 기분이 좋았다.
> 가격은 비쌌다. 20분정도 탄거 같은데 2200원

###  위키를 조금 변경해볼까 
- 맨날 마음만 이렇게 저렇게 해볼까 하는데 막상 안한다. 다른 몇몇 분들은 위키를 예쁘게 커스터마이징 하셨던데 나도 한번 해볼까 싶다. 일단 첫번째 단계인 MD파일을 react에서 읽을 수 있나 확인해보았다. 아래를 참조 하면 된다.

- [[readMDFile]]{리액트에서 MD파일 읽기}



## 2023-06-04 09:15:00
### 나른한 일요일 아침
- 주말에는 테니스를 치면서 평일에 있던 스트레스를 조절한다. 볼 머신기가 있는 24시간 테니스장에서 치는데 가격은 비싸지만 혼자서 조용히 연습하기가 좋다. 공 하나하나 집중하면서 치다보면 한시간은 그냥 지나간다. 이 후 스벅에서 딸기스무디 한잔을 한다음 이것저것 보면서 코딩도 하고논다.

## 2023-06-03 16:27:00
### 항해99 파트타임 오프라임 질문
- 로컬 서버로 업로드 및 다운로드 질문 -> 이 문제는 서버URL + C 드라이브의 URL을 붙여서 프론트에 보내고 있었다. 당연히 안되는 것이고 get 메소드로 해당 파일에 접근 권한을 연결시켜 줘야했다. 해결완료
- EB셋팅 방법 -> docker desktop 설치, Dockerfile 생성, 다행이도 eb-cli는 설치가 되어 있었다. 그리고 이번에 EB 콘솔이 업그레이드 되면서 굉장히 셋팅을 세세하게 할 수 있는데. 별거 없다. ELB 설정 해주고, public오픈만 체크해주면 간다한게 사용할 수 있었다. 그리고 해결 완료
- passport 카카오톡 연결- 이것은 가이드만 해줬다. 결국엔 callback으로 refreshtoken을 받았는데 프론트와 그냥 연결만했지 실질적으로 무엇을 했는지 명확하지 않았다. 그 이후 발급된 refreshToken을 가지고 이제 서버와 비교를 하면서 인증이 되어 있는 상태이면 token(accessToken)을 발행해줘야 하는 것을 알려드렸다.

## 2023-06-02 08:23:00
### DB join & App join
- 이 질문도 항해파트타임에서 나왔다. 그리고 오늘 아침 카톡방에 주제로 나왔다.
- DB join은 DB에서 필요한 내용을 미리 join을 해서 처리를 한다음 백엔드로 넘기는 거고, App Join은 통으로 DB에 요청해서 오는 것을 백에서 조인 처리 하는 것이다.
- 추가 적으로 샤딩(Sharding)이란 기법이 나온다. 대용량의 데이터를 한 테이블로 관리하게 되면 부하기 오기 때문에 각각 테이블로 나눠서 하는것인다. 두가지 방법이 있다. 가로로 나눠서 즉 컬럼을 쪼갠다. 세로로 나눠서 즉 데이터를 나눈다.


## 2023-06-01 07:26:00
### 지속되는 문제점 발생
- 끝가지 마무리를 안한 상태에서 되는것만 확인하고 바로 다음 것으로 넘어가는 습관이 생긴거같다.
- 데일리 테스크 중점적으로 관리를 하자.. 근데 중간중간 들어오는 오류부분을 고칠때는 가끔 시간이 많이 걸려서 참 애매한거 같다.
- 그런데 내가 이미 충분하게 잘 준비를 해놨다면 문제가 생기지 않았을 것이다.

### 항해 기술매니져(?)
- 사실 1년차도 안되는 짬에서 이런것을 하는게 조금 부끄럽기도 하다. 하지만 가르침으로 인해 나도 많은것을 배울 수 있고 모르는 부분도 다른 사람들의 생각을 알수가 있어서 좋다.

### VIM 찾아바꾸기
- 자꾸 잊어버린다. 
- s -> 줄만 바꾸기 예제 :s/test/test2/g ->
- %s -> 전체 페이지 다 바꾸기 :%s/test/test2/g
- 10,20s -> 특정 줄에서 바꾸기 :10,20s/test/test2/g

### tmux template 구성하기
- 맨날 재부팅하거나 세션이 꺼지면 일일이 들어가야하는데 이번기회에 bash shell을 만들었다. 

```bash
SESSION_NAME="ymyd"

tmux new-session -s $SESSION_NAME -d
tmux send-keys "cd /Users/semyungpark/Documents/dev && yarn run start:dev" C-m

tmux split-window -v
tmux send-keys "cd /Users/semyungpark/Documents/dev" C-m
tmux rename-window -t 1 "ymyd-backend"

tmux new-window -t $SESSION_NAME:2 -n "ymyd-frontend"
tmux send-keys "cd /Users/semyungpark/Documents/dev && nvm use 8 && npm start" C-m
tmux split-window -v 
tmux send-keys "cd /Users/semyungpark/Documents/dev/" C-m

tmux new-window -t $SESSION_NAME:3 -n "ymyd-biz-backend"
tmux send-keys "cd /Users/semyungpark/Documents/dev && yarn run start:dev" C-m
tmux split-window -v
tmux send-keys "cd /Users/semyungpark/Documents/dev/ymyd/" C-m

tmux new-window -t $SESSION_NAME:4 -n "ymyd-frontend"
tmux send-keys "cd /Users/semyungpark/Documents/dev" C-m
tmux split-window -v
tmux send-keys "cd /Users/semyungpark/Documents/dev" C-m

tmux new-window -t $SESSION_NAME:5 -n "ymyd-aio-front"
tmux send-keys "cd /Users/semyungpark/Documents/dev" C-m
tmux split-window -v
tmux send-keys "cd /Users/semyungpark/Documents/dev" C-m

#tmux new-window -t $SESSION_NAME:5 -n "gpt"
#tmux send-keys "cd /Users/semyungpark/Documents/dev" C-m

tmux new-window -t $SESSION_NAME:6 -n "blog"
tmux send-keys "vi" C-m

tmux select-window -t $SESSION_NAME:0
tmux attach-session -t $SESSION_NAME
```


## 2023-05-30 07:25:00
### 타임존에 대한 고찰
- 지난번에 어이 없는 버그를 발경하게 되었다. 썰을 풀자면.... 기존에는 EC2로 서버가 운영되고 있다가 EB(ElasticBeanstalk)로 변경하면서 내가 서버셋팅을 KST(한국 시간 +9)으로 변경하였다. 그런데... 3개월간 노티가 제대로 안간것이었다 이유인 즉슨 cron job을 utc 기준으로 셋팅을 해놨기때문에 9시간씩 밀렸던것이다. 
- 내가 KST로 셋팅했던 이유는 내가 개발 하는 서비스는 한국 전용이고 진짜 최대 3만명을 넘기지 않는다. 단지 그 이유였다.
- 그런데 오늘 아침 단톡방에서 mysql시간이 변경되지 않고 이상하게 저장되는 부분을 답변해줬는데 다른분꼐서 경악을 하면서 UTC로 변경하라고 답변만 하고 떠났다. 왜 물어봤지만 대답이 없어 찾아봤다. 왜 UTC로 해야하는지

1. 다양한 멀티 디바이스에서 버그가 일어날수 있다.
2. mysql에서 오프셋을 지원하지 않을 수도 있다.(오래된 글이라 확인해봐야함...)
3. 미국 같은 어떤 주에서는 섬머타임으로 시간이 변경될 수 도 있다.

- reference
    - [레딧링크](https://www.reddit.com/r/Wordpress/comments/w2yazw/check_if_there_is_a_typo_what_should_i_do_couldnt/)
    - [스택오버플로우](https://stackoverflow.com/a/25647094)
    - [다른개인홈페이지](http://yellerapp.com/posts/2015-01-12-the-worst-server-setup-you-can-make.html)
    
## 2023-05-29 10:04:00
### 아침형 인간
- 출퇴근 합치면 4시간, 5시에 일어나서 준비하고 밥먹고 5시 40분정도에 집을 나선다. 그리고 나서 대략 7시20분~30분정도에 사무실에 도착한다.
- 거의 반년이상을 이렇게 하니까 더더욱 아침형 인간이 되벼렸다. 하루가 길고 피곤하기도 하지만 최대한 컨디션을 유지하도록 노력하고 있다. 주말에는 테니스에 열중하고 있다. 적어도 아침에 7시에는 나와서 2시간정도 연습을 하고 레슨도 받고 동호회도 나간다. 그래도 하루에 절반도 안지나가서 카페에 가서 컴퓨터를 켜서 이런저런 코딩도 끄적여 보고 졸다가 내가 좋아하는 딸기스무디도 먹는다. 
> 뭐 만족하고 있다.

## 2023-05-28 22:18:00
### Nestia 사용해보자
- 알고는 있었는데 굉장히 유용한거 같다. 
- 한줄로 정리하면 NestJs에서 Dto class를 사용하지 않고 interface를 사용하는데 그 상태를 그대로 배포를 한다음 프론트에서 라이브러리를 받아서 Api를 사용하는 것이다.
- 한줄로 하긴 긴거 같지만 결국엔 Type이변경이 되어도 프론트에서는 바로 바로 에러가 발생해서 변경할 수 있도록 하는거 같다.
- 일단 써봐야겠다.

## 2023-05-28 09:09:00 
### 밀려있던 일기를 조금씩 써본다.
- 하루에 하나씩만 적자.. 너무 밀렸다.. ㅠㅠ
- 시간 순서는 일단 기억이 안나니까 노션을 확인하면서 체크를 하면서 정리해야겠다.
  - 쿠키 설정이 나를 미치게 한다. 다시한번 정리해야 잊어버리지 않을거 같다.
  - 두번째 프로젝트를 진행하고 있다.
  - 항해 플러스를 시작하게 되었다. (대용량 처리 및 TDD)
  - 
  - EC2 -> Docker EB(ElasticBeanstalk) 마이그레이션 완료
  - DeadLock 문제 해결
  - Isolation Level에 대해서 알게됨 solation level변경
    - Repeatable-read → read-commited
    - 1차적으로 해결은 했다. 하지만 추후에도 DeadLock 에러가 발생해서 Procedure 구문들을 없앴다.(내가 하려했지만 시간이 없었다....)
  - Index 설정을 배워서 굉장한 퍼포먼스 성능을 이끌었다.



## 2023-01-21 22:39:11
### 벌써 2023년.... 
- 해야될게 너무 많은데...


## 2023-01-12 13:00:00
### DeadLock과 알수없는 트랙픽 해결
- 


