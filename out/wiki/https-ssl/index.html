<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/56494905/159731726-9ef04fce-62c0-4a72-bee9-fef8e382f7cb.png"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/56494905/161882125-1095a3bf-632c-4d3f-80e4-f01ff34102b8.png"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/56494905/161895465-1bbe2acc-ff94-49d4-a594-b92d0292f58c.png"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/56494905/161885376-8022a886-fc79-46c9-a073-6839952e2fbe.png"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/56494905/161917519-916e0d93-6011-46fb-8bf2-16c6d19fdc3f.png"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/56494905/161897304-cb440634-2169-43b8-8228-accd707c9341.png"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/56494905/161897397-47589b99-6113-468a-85dc-944d5b5a3828.png"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/56494905/161899159-9c07101d-e829-4562-a127-9c465263dd74.png"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/56494905/161919187-83ea6c6e-8a84-4839-88a5-a213005fe8ec.png"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/56494905/161886749-b3359817-3331-41c7-8505-ec0222642733.png"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-4d00054ca4698fec.js"/><script src="/_next/static/chunks/1bace94d-b139ae434083d54f.js" async=""></script><script src="/_next/static/chunks/170-01d7f2fd137ced57.js" async=""></script><script src="/_next/static/chunks/main-app-f006bce5492190a9.js" async=""></script><script src="/_next/static/chunks/598-b69b240bf426274b.js" async=""></script><script src="/_next/static/chunks/531-a6f513f60d7f2ed6.js" async=""></script><script src="/_next/static/chunks/app/layout-1a9ce41322de5295.js" async=""></script><script src="/_next/static/chunks/848-a557251920a40253.js" async=""></script><script src="/_next/static/chunks/app/wiki/%5Bslug%5D/page-3bb981cd3ee1ea46.js" async=""></script><link rel="preload" as="image" href="https://user-images.githubusercontent.com/56494905/162109026-5095b356-4443-46a3-bde1-9802f498321e.png"/><title>Your Blog Title</title><meta name="description" content="Your blog description"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script><style data-styled="" data-styled-version="6.1.13">*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}/*!sc*/
html{font-size:16px;}/*!sc*/
@media screen and (min-width: 320px){html{font-size:14px;}}/*!sc*/
@media screen and (min-width: 768px){html{font-size:16px;}}/*!sc*/
body{margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}/*!sc*/
button,a{min-height:44px;min-width:44px;}/*!sc*/
input,select,textarea{font-size:16px;}/*!sc*/
data-styled.g1[id="sc-global-eaBKNu1"]{content:"sc-global-eaBKNu1,"}/*!sc*/
.iZiQNx{width:100%;padding:1rem;background:white;box-shadow:0 2px 4px rgba(0,0,0,0.1);}/*!sc*/
@media screen and (min-width: 768px){.iZiQNx{padding:1rem 2rem;}}/*!sc*/
data-styled.g2[id="sc-c74937be-0"]{content:"iZiQNx,"}/*!sc*/
.NHfvt{display:flex;flex-direction:column;gap:1rem;}/*!sc*/
@media screen and (min-width: 768px){.NHfvt{flex-direction:row;gap:2rem;}}/*!sc*/
.NHfvt a{font-size:1rem;color:#495057;text-decoration:none;transition:color 0.2s ease;}/*!sc*/
.NHfvt a:hover{color:#228be6;}/*!sc*/
data-styled.g3[id="sc-c74937be-1"]{content:"NHfvt,"}/*!sc*/
.eqaMzn h3{color:#495057;font-size:1.1rem;margin-bottom:1rem;}/*!sc*/
data-styled.g4[id="sc-fb7cae14-0"]{content:"eqaMzn,"}/*!sc*/
.TDPIL{list-style:none;padding:0;}/*!sc*/
.TDPIL li{margin-bottom:0.5rem;}/*!sc*/
.TDPIL li a{color:#6c757d;text-decoration:none;transition:color 0.2s ease;}/*!sc*/
.TDPIL li a:hover{color:#228be6;}/*!sc*/
data-styled.g5[id="sc-fb7cae14-1"]{content:"TDPIL,"}/*!sc*/
.kZhIA-D{text-align:center;margin-top:2rem;padding-top:1rem;border-top:1px solid #dee2e6;color:#868e96;font-size:0.9rem;}/*!sc*/
data-styled.g6[id="sc-fb7cae14-2"]{content:"kZhIA-D,"}/*!sc*/
.dpWTVH{width:100%;padding:1rem;background-color:#f8f9fa;}/*!sc*/
@media screen and (min-width: 768px){.dpWTVH{padding:2rem;}}/*!sc*/
data-styled.g7[id="sc-fb7cae14-3"]{content:"dpWTVH,"}/*!sc*/
.kLEGFD{display:grid;grid-template-columns:1fr;gap:1.5rem;}/*!sc*/
@media screen and (min-width: 768px){.kLEGFD{grid-template-columns:repeat(2,1fr);}}/*!sc*/
@media screen and (min-width: 1024px){.kLEGFD{grid-template-columns:repeat(3,1fr);max-width:1200px;margin:0 auto;}}/*!sc*/
data-styled.g8[id="sc-fb7cae14-4"]{content:"kLEGFD,"}/*!sc*/
.cVYoEr{padding:1rem;max-width:800px;margin:0 auto;}/*!sc*/
@media screen and (min-width: 768px){.cVYoEr{padding:2rem;}}/*!sc*/
data-styled.g9[id="sc-f070b76b-0"]{content:"cVYoEr,"}/*!sc*/
.gaoDd{margin-bottom:2rem;}/*!sc*/
.gaoDd h1{font-size:2.5rem;margin-bottom:1rem;}/*!sc*/
.gaoDd time{color:#6c757d;font-size:0.9rem;}/*!sc*/
data-styled.g10[id="sc-f070b76b-1"]{content:"gaoDd,"}/*!sc*/
.rqYiW{line-height:1.6;}/*!sc*/
.rqYiW h1,.rqYiW h2,.rqYiW h3,.rqYiW h4,.rqYiW h5,.rqYiW h6{margin:2rem 0 1rem;}/*!sc*/
.rqYiW p{margin:1rem 0;}/*!sc*/
.rqYiW code{background:#f8f9fa;padding:0.2rem 0.4rem;border-radius:4px;}/*!sc*/
.rqYiW pre{background:#f8f9fa;padding:1rem;border-radius:4px;overflow-x:auto;}/*!sc*/
.rqYiW pre code{background:none;padding:0;}/*!sc*/
data-styled.g11[id="sc-f070b76b-2"]{content:"rqYiW,"}/*!sc*/
</style></head><body><div style="min-height:100vh;display:flex;flex-direction:column"><header class="sc-c74937be-0 iZiQNx"><nav class="sc-c74937be-1 NHfvt"><a href="/">Home</a><a href="/wiki/">Wiki</a><a href="/blog/">Blog</a><a href="/search/">Search</a></nav></header><main style="flex:1"><article class="sc-f070b76b-0 cVYoEr"><header class="sc-f070b76b-1 gaoDd"><h1>HTTPS/SSL</h1><time dateTime="2022-03-23 21:59:10 +0900">3/23/2022</time></header><div class="sc-f070b76b-2 rqYiW"><ul>
<li>TOC
{:toc}</li>
</ul>
<h1>Data Privacy?</h1>
<blockquote>
<p>Privacy란 개인의 사생활이나 집안의 사사로운 일 또는, 그것이 남에게나 사회에 알려지지 않으며 간섭받지 않는 권리.</p>
</blockquote>
<h2>왜 데이터의 privacy가 중요한가?</h2>
<ul>
<li>범죄에 사용 될 가능성이 있고 사용자를 교란 및 괴롭힐 수  도 있다</li>
<li>개인정보가 유출되면 원하지 않는 광고들을 많이 받을 수 있다</li>
<li>개인의 사생활을 추적할 수 있어, 언제나 추적 감시 대상이 될 수 있다</li>
<li>또한 기업의 중요 문서 등이 탈취되면 기업에 기술 및 가치를 탈취 당할 수 있다</li>
</ul>
<h1>http vs https</h1>
<h2><code>http</code>(HyperText Transfer Protorcol)</h2>
<ul>
<li>HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜이다. [^protocol]</li>
<li>모든 데이터 교환의 기초</li>
<li>클라이언트-서버 프로토콜(통신규약)</li>
<li>텍스트 기반의 통신 규약으로 <code>인터넷에서 데이터를 주고받을</code> 수 있는 프로토콜이다.
<img src="https://user-images.githubusercontent.com/56494905/159731726-9ef04fce-62c0-4a72-bee9-fef8e382f7cb.png" alt="image"/>{:width=&quot;80%&quot;, align=&quot;center&quot;}</li>
</ul>
<h2><code>https</code>(HyperText Transfer Protocol over Secure Socket Layer )</h2>
<ul>
<li>
<p>http 기반에 <code>SSL</code>을 추가 보완한 프로토콜</p>
<p><img src="https://user-images.githubusercontent.com/56494905/161882125-1095a3bf-632c-4d3f-80e4-f01ff34102b8.png" alt="image"/></p>
</li>
</ul>
<h2>http/https 비교</h2>
<p>| 차이점            | http     | https                    | 설명                                                   |
| -                 | :-:      | :-:                      | -                                                      |
| 보안성            | 낮음     | 높음                     | 상대적으로 https가 보안성 측면에서 높다                |
| 사용계층          | 응용계층 | 전송계층과 응용계층 사이 | SSL/TLS 가 중간에 위치하여 한번더 체크를 한다          |
| 사용포트          | 80       | 443                      | 443 포트로 먼저 certificate 을 확인 후 통신한다        |
| 전달데이터 암호화 | No       | Yes                      | https는 암호화 되서 전송된다                           |
| 속도              | 빠름     | 상대적으로 느림          | 상대적으로http보다  https가 더 느리다(Handshake때문에) |</p>
<h1>TLS/SSL</h1>
<h2>TLS(Transport Layer Security)</h2>
<ul>
<li>TLS 특징<!-- -->
<ul>
<li>클라이언트와 서버의 암호화 정보 교환을 목적을 두고 1999년 개발되었다</li>
<li>TLS는 웹뿐만아니라 이메일, 메세지,  VoIP 등 에 쓰인다</li>
<li>최신버전인 TLS 1.3  2018년에 나왔다</li>
<li>기존 버전의 암호화 프로토콜인 <code>SSL</code>을 포함하고 있다</li>
<li><code>대칭키 암호</code>[^symmetric-key-algorithm]을 사용하여 암호화한다</li>
</ul>
</li>
</ul>
<h2>SSL(Secure Socket Layer)</h2>
<blockquote>
<p>SSL or Secure Sockets Layer 암호화 기반의 인터넷 보안 프로토콜이다.</p>
</blockquote>
<ul>
<li>
<p>SSL 특징</p>
<ul>
<li>1995년 네스케이프사에서 처음 개발되었다</li>
<li>개발 목적은 프라이버시 보장, 인증, 데이터 진실성을 위해 개발되었다</li>
<li>암호화 알고리즘을 사용하여 데이터를 암호화함</li>
</ul>
</li>
<li>
<p>SSL 사용방법</p>
<ul>
<li>CA(Certificate authorities)에서 인증서를 발급</li>
<li>서버에 설치 후 웹서버 설정</li>
</ul>
</li>
</ul>
<h2>TLS vs SSL</h2>
<blockquote>
<p>TLS는 SSL 3.0을 계승하는 암호화 프로토콜이다
즉 앞으로 <code>TLS == SSL</code> 라고 생각하면 된다</p>
</blockquote>
<h2>SSL 암호화 방식</h2>
<ul>
<li>대칭키 방식<!-- -->
<ul>
<li>해시 테이블 처럼 키가 있어야 암호화를 할 수 있다</li>
<li>암호화 할때 1234이라는 암호로 키를 사용했다면 1234이 있어야 복호화 할 수 있다</li>
<li>대칭키를 공유할때 위험이 노출되기 때문에 매우 위험하다</li>
</ul>
</li>
<li>비대칭 키 방식<!-- -->
<ul>
<li>공개키(public key)와 개인키(private key)를 가진다</li>
<li>공개키로 암호화 하는 경우와 개인키로 암호화 하는것으로 구분</li>
<li>암호화할때의 키와 복호화할 때의 키 값이 다르면 비대칭 키라고 한다</li>
</ul>
</li>
</ul>
<blockquote>
<p>CA에서 발급받은 인증서는 제 3자가 소유하고있는 사이트를 보장해준다는 의미
즉 데이터가 안전하게 암호화 되어 전송되고 있다는 뜻이다</p>
</blockquote>
<blockquote>
<p>구글에서는 공식적으로 Search eninge ranking 이라는 항목으로 <code>https 암호화</code>를 적용시 <code>상위 검색순위</code>에 들어가게 됨으로 꼭 https를 적용시키자
<a href="https://g.co/WebmasterChecklist">SEO 체크리스트 공식문서</a></p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/56494905/161895465-1bbe2acc-ff94-49d4-a594-b92d0292f58c.png" alt="image"/>{:width=&quot;50%&quot;}</p>
<h2>인증서(Certificate)</h2>
<ul>
<li>CA(Certificate authorities) 기관의 종류<!-- -->
<ul>
<li>무료<!-- -->
<ul>
<li>Let&#x27;s Encrypt</li>
<li>WoSign</li>
<li>AWS Certificate</li>
<li>CloudFlare SSL</li>
</ul>
</li>
<li>유료<!-- -->
<ul>
<li>
<p>Verisign</p>
</li>
<li>
<p>GoDaddy</p>
</li>
<li>
<p>GlobalSign</p>
</li>
<li>
<p>Comodo(Sectigo)</p>
</li>
<li>
<p>Thawte</p>
</li>
<li>
<p>GeoTrust</p>
</li>
<li>
<p>DigiCert</p>
</li>
</ul>
</li>
</ul>
<ul>
<li>
<p>실제로 적용된 사례</p>
<p><img src="https://user-images.githubusercontent.com/56494905/161885376-8022a886-fc79-46c9-a073-6839952e2fbe.png" alt="image"/>{:width=&quot;50%&quot;}</p>
<p><img src="https://user-images.githubusercontent.com/56494905/161917519-916e0d93-6011-46fb-8bf2-16c6d19fdc3f.png" alt="image"/>{:width=&quot;50%&quot;}</p>
</li>
</ul>
<blockquote>
<p>각자브라우져에 자물쇠 부분을 클릭해서 Certificate 부분을 보면 도메인의 소유자의 대한 내용이 상세히 나온다 즉 SSL이 적용된 사례라고 볼 수 있다</p>
</blockquote>
</li>
</ul>
<h2>인증서 구매 및 셋팅</h2>
<ul>
<li>
<p>CA 사이트에서 구매 후</p>
<p><img src="https://user-images.githubusercontent.com/56494905/161897304-cb440634-2169-43b8-8228-accd707c9341.png" alt="image"/>{:width=&quot;50%&quot;}</p>
</li>
<li>
<p>도메인 내용 입력장면</p>
<p><img src="https://user-images.githubusercontent.com/56494905/161897397-47589b99-6113-468a-85dc-944d5b5a3828.png" alt="image"/>{:width=&quot;50%&quot;}</p>
</li>
<li>
<p>생성된 private key</p>
<p><img src="https://user-images.githubusercontent.com/56494905/161899159-9c07101d-e829-4562-a127-9c465263dd74.png" alt="image"/>{:width=&quot;50%&quot;}</p>
</li>
<li>
<p>cludeflare.com의 certificate의 정보</p>
<ul>
<li>도메인 네임이 인증되어있고 어떤 내용으로 발생되었는지</li>
<li>어떤 사람, 기관, 기종에서 발생되었는지</li>
<li>발급한 인증기관</li>
<li>인증기관의 디지털 서명</li>
<li>관련된 서브 도메인들</li>
<li>인증날짜</li>
<li>만료날짜</li>
<li>Public 키</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/56494905/161919187-83ea6c6e-8a84-4839-88a5-a213005fe8ec.png" alt="image"/>{:width=&quot;50%&quot;}</p>
</li>
<li>
<p>인증기관의 등록 절차가 모두 완료 후 아래와 같은 4가지 키 와 인증서를 받게 된다</p>
<ul>
<li>ssl.key : 서버쪽 비공개키</li>
<li>ssl.crt : 디지털 인증서</li>
<li>ca.pem : ROOT CA 인증서</li>
<li>sub.class1.server.ca.pem : 중계자 인증서</li>
</ul>
</li>
<li>
<p>Apache 또는 Nginx 또는 Node.js 에 설치
... 생략[나중에...]</p>
</li>
</ul>
<h2>SSL 작동원리</h2>
<ul>
<li>
<p>작동원리</p>
<ol>
<li>핸드쉐이크를 통한 서버 인증 확인 절차</li>
<li>절차 완료 후 클라이언트와 서버 둘다 세션 획득 성공</li>
<li>대칭 암호화 데이터 전송(세션 키를 이용해서)</li>
</ol>
</li>
<li>
<p>알아야할 개념</p>
<ol>
<li>대칭 키 알고리즘(Symmetric-key algorithm)</li>
<li>비 대칭 키 암호</li>
<li>인증서(certificate)</li>
<li>CA (Certificate authority)</li>
<li>핸드쉐이크(3way Handshake)</li>
<li>암호화 알고리즘 (RSA 기타 등등...)</li>
</ol>
</li>
</ul>
<!-- -->&lt;!--
- 대칭 키 암호(Symmetric-key algorithm)
    * 암호화 할때 같은 암호키를 쓰는 것

- 공개 키(public key)
    * 모든 사람이 언제든지 키를 공유함
    
- 비공개 키(private key)
    * 어떠한 방식으로 키를 조심스럽게 다름사람한테 보내야 한다

- 공개키와 비공개키(대칭키) 
    * 실제 데이터 -&gt; `대칭 키(비공개키)`
    * 대칭 키(비공개 키) -&gt; `공개키`
    
&gt; 실제 데이터를 대칭키로 암호화 한 후, 다시 그 키를 공개키로 암호화 한다
--&gt;<!-- -->
<h3>SSL Handshake를 통한 서버 인증 확인 절차</h3>
<ul>
<li>
<p>SSL Handshake의 전체적인 흐름도</p>
<p><img src="https://user-images.githubusercontent.com/56494905/161886749-b3359817-3331-41c7-8505-ec0222642733.png" alt="image"/>{:width=&quot;100%&quot;}</p>
</li>
<li>
<p>SSL Handshake RSA key 교환방식 알고리즘을 사용한 순서도표</p>
<p><img src="https://user-images.githubusercontent.com/56494905/162109026-5095b356-4443-46a3-bde1-9802f498321e.png" alt="image"/></p>
</li>
</ul>
<!-- -->&lt;!--
| 순서 | 포함된 데이터                                                | 클라이언트                           | 방향성  | 서버                                           | 일어나는 일                                                                                                             |
| :-:  | :-:                                                          | :-:                                  | :-:     | :-:                                            | :-:                                                                                                                     |
| 1    | TLS version, the ciper suites, client random                 | &quot;hello&quot; 메세지를 서버에 보낸다       | --|                                                | 클라이언트가 서버에 접속한다. 사용할 수 있는 알고리즘을 서버로 보낸다, 이미 세션 아이디가 있다면 기존 세션키를 확인한다 |
| 2    | SSL certificate, server&#x27;s chosen cipher suite, server random |                                      | &lt;-----  | &quot;hello&quot;에 다시 인증서를 넣고 클라이언트로 보냄 |                                                                                                                         |
| 3    | premaster secret                                             | 공개키로 암호화한 키를 서버로 보낸다 | --|                                                | 공개키는 인증서에 포함되어 있음, 인증서를 브라우져 안에 있는 CA list와 대조하여 확인                                    |
| 4    |                                                              |                                      |         | 비공개키로 premaster secret 을 다시 복호화     | pre master key -&gt; master key 로 복호화                                                                                  |
| 5    | session key                                                  | 세선키를 생성                        |         | 세션키를 생성                                  | 각자 서로 공유한 client random, server random을 가지고 session key를 생성                                               |
| 6    | finished                                                     | finished를 서버에 보냄               | &lt;-| finished를 클라이언트에 보냄                   | 서로 finished가 보내서 확인함 (세션키를 이용하여 최종 연결완료)                                                         |

--&gt;<!-- -->
<h3>세션(데이터 전송 준비완료)</h3>
<ul>
<li>마지막으로 대칭 키가 준비가 완료</li>
<li>세션키를 가지고 암호화 한다음 데이터를 전송</li>
</ul>
<h1>7 가지 Man-in-the-middle attack</h1>
<ul>
<li>IP spoofing<!-- -->
<ul>
<li>공격자가 IP 주소를 변형시켜 일반적인 클라이언트인척 속인 후 서버에 접속해서 추적을 피하는 해킹 기법이다</li>
</ul>
</li>
<li>DNS spoofing<!-- -->
<ul>
<li>공격자는 금융기관등의 사이트와 동일한 사이트를 만들어 강제로 가짜 사이트로 이동하게 하는 방식이다</li>
</ul>
</li>
<li>HTTPS spoofing<!-- -->
<ul>
<li>링크주소는 https로 되어 있지만 사실 링크된 사이트는 http로 된 사이트로 연결되어 클라이언트의 정보를 뺴는 방식</li>
</ul>
</li>
<li>SSL hijacking<!-- -->
<ul>
<li>http로 된 URL에 접속할때 공격자가 설정해 놓은 SSL 서버에 접속을 유도하여 클라이언트와 서버 중간에서 데이터를 가로채는 공격방식</li>
</ul>
</li>
<li>Email hijacking<!-- -->
<ul>
<li>금융기관을 사칭한 사이트로 접속을 유도하여 사용자 정보를 빼는 방식</li>
</ul>
</li>
<li>Wi-fi eavesdropping<!-- -->
<ul>
<li>공공 wifi를 사용하면 공격자가 router에 연결된 디바이스의 패킷 정보를 모니터 할 수 있다.</li>
</ul>
</li>
<li>Stealing browser cookies<!-- -->
<ul>
<li>쿠키 탈취는 클라이언트 내부에 저장된 개인정보가 탈취되는 것을 말한다</li>
</ul>
</li>
</ul>
<blockquote>
<p>https 로 미리 암호화된 상태로 연결되었다면 데이터가 <code>중간에 탈취</code>되더라도 <code>세션키로 암호화</code> 되어 있어서 좀더 안전할 수가 있다.</p>
<blockquote>
<p>단 좀비 컴퓨터를 이용해 여러대의 컴퓨터가 한곳을 집중적으로 공격하는 DDOS 공격에는 https는 도움이 안된다.</p>
</blockquote>
</blockquote>
<h1>결론</h1>
<blockquote>
<p>랜선을 타고 다니는 모든 데이터는 안전하지 않다</p>
<blockquote>
<p>다만 이중 삼중으로 암호화시 좀더 보안성이 향상 된다
따라서 <code>https</code>는 선택이 아닌 <code>필수</code>다</p>
</blockquote>
</blockquote>
<h1>참고사이트</h1>
<ul>
<li><a href="https://developer.mozilla.org/ko/docs/Web/HTTP/Overview">모질라 공식사이트</a></li>
<li><a href="http://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml">http 상태코드</a></li>
<li><a href="https://www.cloudflare.com/learning/ssl/what-is-ssl/">Cloudflare</a></li>
<li><a href="https://wayhome25.github.io/cs/2018/03/11/ssl-https/">링크</a></li>
<li><a href="https://wiki.mozilla.org/Security/Server_Side_TLS#Recommended_Ciphersuite">Mozila - ChiperSuite</a></li>
<li><a href="https://us.norton.com/internetsecurity-wifi-what-is-a-man-in-the-middle-attack.html">Norton</a></li>
</ul>
<h1>주석</h1>
<p>[^protocol]:  프로토콜은 컴퓨터 내부에서, 또는 컴퓨터 사이에서 데이터의 교환 방식을 정의하는 규칙 체계이다. 기기 간 통신은 교환되는 데이터의 형식에 대해 상호 합의를 요구한다. 이런 형식을 정의하는 규칙의 집합을 프로토콜이라고 한다.
[^statuscode]: http 반환코드: 클라이언트의 데이터 요청에 따른 서버 반환 코드
[^handshake]: 프로토콜(protocol): 서버와 클라이언트의 소통 과정을 나타낸다.
[^SYC]: 동기화(Synchronization  )
[^ACK]: 승인(Acknowledgement)
[^symmetric-key-algorithm]: 대칭키 암호(symmetric-key algorithm) 암호화 알고리즘의 한 종류로, 암호화와 복호화에 같은 암호 키를 쓰는 알고리즘을 의마한다.
[^personal-information]: Personal information : 어떤 사람의 자세한 정보 즉 이름, 주소 기기정보, 계정정보 및 암호 등이다</p></div></article></main><footer class="sc-fb7cae14-3 dpWTVH"><div class="sc-fb7cae14-4 kLEGFD"><div class="sc-fb7cae14-0 eqaMzn"><h3>Navigation</h3><ul class="sc-fb7cae14-1 TDPIL"><li><a href="/">Home</a></li><li><a href="/wiki/">Wiki</a></li><li><a href="/blog/">Blog</a></li><li><a href="/search/">Search</a></li></ul></div><div class="sc-fb7cae14-0 eqaMzn"><h3>Categories</h3><ul class="sc-fb7cae14-1 TDPIL"><li><a href="/wiki/Javascript/">JavaScript</a></li><li><a href="/wiki/Python/">Python</a></li><li><a href="/wiki/Docker/">Docker</a></li><li><a href="/wiki/algorithm/">Algorithms</a></li></ul></div><div class="sc-fb7cae14-0 eqaMzn"><h3>Connect</h3><ul class="sc-fb7cae14-1 TDPIL"><li><a href="https://github.com/your-username" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://linkedin.com/in/your-username" target="_blank" rel="noopener noreferrer">LinkedIn</a></li></ul></div></div><div class="sc-fb7cae14-2 kZhIA-D"><p>© <!-- -->2024<!-- --> Your Name. All rights reserved.</p></div></footer></div><script src="/_next/static/chunks/webpack-4d00054ca4698fec.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[4101,[\"598\",\"static/chunks/598-b69b240bf426274b.js\",\"531\",\"static/chunks/531-a6f513f60d7f2ed6.js\",\"185\",\"static/chunks/app/layout-1a9ce41322de5295.js\"],\"default\"]\n3:I[3742,[\"598\",\"static/chunks/598-b69b240bf426274b.js\",\"531\",\"static/chunks/531-a6f513f60d7f2ed6.js\",\"185\",\"static/chunks/app/layout-1a9ce41322de5295.js\"],\"default\"]\n4:I[7960,[],\"\"]\n5:I[5625,[],\"\"]\n6:I[9946,[\"598\",\"static/chunks/598-b69b240bf426274b.js\",\"531\",\"static/chunks/531-a6f513f60d7f2ed6.js\",\"185\",\"static/chunks/app/layout-1a9ce41322de5295.js\"],\"default\"]\n8:I[8165,[],\"OutletBoundary\"]\na:I[8165,[],\"MetadataBoundary\"]\nc:I[8165,[],\"ViewportBoundary\"]\ne:I[810,[],\"\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"1gBIa67YwYncMlz2nwFiK\",\"p\":\"\",\"c\":[\"\",\"wiki\",\"https-ssl\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"wiki\",{\"children\":[[\"slug\",\"https-ssl\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"https-ssl\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"ko\",\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"$L2\",null,{\"children\":[\"$\",\"div\",null,{\"style\":{\"minHeight\":\"100vh\",\"display\":\"flex\",\"flexDirection\":\"column\"},\"children\":[[\"$\",\"$L3\",null,{}],[\"$\",\"main\",null,{\"style\":{\"flex\":1},\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"h2\",null,{\"children\":\"404 - Page Not Found\"}],[\"$\",\"p\",null,{\"children\":\"The page you are looking for does not exist.\"}]]}],\"notFoundStyles\":[]}]}],[\"$\",\"$L6\",null,{}]]}]}]}]}]]}],{\"children\":[\"wiki\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"wiki\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"https-ssl\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"wiki\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L7\",null,[\"$\",\"$L8\",null,{\"children\":\"$L9\"}]]}],{},null]},null]},null]},null],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"UgWHaKLX8H82AjtxB770-\",{\"children\":[[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],null]}]]}]]],\"m\":\"$undefined\",\"G\":[\"$e\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"f:I[4023,[\"598\",\"static/chunks/598-b69b240bf426274b.js\",\"848\",\"static/chunks/848-a557251920a40253.js\",\"607\",\"static/chunks/app/wiki/%5Bslug%5D/page-3bb981cd3ee1ea46.js\"],\"WikiContent\"]\n10:T37a0,"])</script><script>self.__next_f.push([1,"* TOC\n{:toc}\n\n# Data Privacy?\n\u003e Privacy란 개인의 사생활이나 집안의 사사로운 일 또는, 그것이 남에게나 사회에 알려지지 않으며 간섭받지 않는 권리.\n\n## 왜 데이터의 privacy가 중요한가?\n\n* 범죄에 사용 될 가능성이 있고 사용자를 교란 및 괴롭힐 수  도 있다\n* 개인정보가 유출되면 원하지 않는 광고들을 많이 받을 수 있다 \n* 개인의 사생활을 추적할 수 있어, 언제나 추적 감시 대상이 될 수 있다\n* 또한 기업의 중요 문서 등이 탈취되면 기업에 기술 및 가치를 탈취 당할 수 있다 \n\n\n# http vs https\n## `http`(HyperText Transfer Protorcol)\n\n* HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜이다. [^protocol]\n* 모든 데이터 교환의 기초\n* 클라이언트-서버 프로토콜(통신규약)\n* 텍스트 기반의 통신 규약으로 `인터넷에서 데이터를 주고받을` 수 있는 프로토콜이다.\n    ![image](https://user-images.githubusercontent.com/56494905/159731726-9ef04fce-62c0-4a72-bee9-fef8e382f7cb.png){:width=\"80%\", align=\"center\"}\n\n## `https`(HyperText Transfer Protocol over Secure Socket Layer )\n* http 기반에 `SSL`을 추가 보완한 프로토콜\n\n    ![image](https://user-images.githubusercontent.com/56494905/161882125-1095a3bf-632c-4d3f-80e4-f01ff34102b8.png)\n\n## http/https 비교\n\n| 차이점            | http     | https                    | 설명                                                   |\n| -                 | :-:      | :-:                      | -                                                      |\n| 보안성            | 낮음     | 높음                     | 상대적으로 https가 보안성 측면에서 높다                |\n| 사용계층          | 응용계층 | 전송계층과 응용계층 사이 | SSL/TLS 가 중간에 위치하여 한번더 체크를 한다          |\n| 사용포트          | 80       | 443                      | 443 포트로 먼저 certificate 을 확인 후 통신한다        |\n| 전달데이터 암호화 | No       | Yes                      | https는 암호화 되서 전송된다                           |\n| 속도              | 빠름     | 상대적으로 느림          | 상대적으로http보다  https가 더 느리다(Handshake때문에) |\n\n\n\n# TLS/SSL\n## TLS(Transport Layer Security)\n- TLS 특징\n    * 클라이언트와 서버의 암호화 정보 교환을 목적을 두고 1999년 개발되었다\n    * TLS는 웹뿐만아니라 이메일, 메세지,  VoIP 등 에 쓰인다\n    * 최신버전인 TLS 1.3  2018년에 나왔다\n    * 기존 버전의 암호화 프로토콜인 `SSL`을 포함하고 있다\n    * `대칭키 암호`[^symmetric-key-algorithm]을 사용하여 암호화한다\n\n\n## SSL(Secure Socket Layer) \n\u003e SSL or Secure Sockets Layer 암호화 기반의 인터넷 보안 프로토콜이다.\n\n- SSL 특징\n    * 1995년 네스케이프사에서 처음 개발되었다\n    * 개발 목적은 프라이버시 보장, 인증, 데이터 진실성을 위해 개발되었다 \n    * 암호화 알고리즘을 사용하여 데이터를 암호화함\n    \n\n- SSL 사용방법 \n    * CA(Certificate authorities)에서 인증서를 발급\n    * 서버에 설치 후 웹서버 설정\n    \n## TLS vs SSL \n    \n\u003e TLS는 SSL 3.0을 계승하는 암호화 프로토콜이다\n\u003e 즉 앞으로 `TLS == SSL` 라고 생각하면 된다\n\n## SSL 암호화 방식 \n- 대칭키 방식\n    * 해시 테이블 처럼 키가 있어야 암호화를 할 수 있다 \n    * 암호화 할때 1234이라는 암호로 키를 사용했다면 1234이 있어야 복호화 할 수 있다\n    * 대칭키를 공유할때 위험이 노출되기 때문에 매우 위험하다\n- 비대칭 키 방식\n    * 공개키(public key)와 개인키(private key)를 가진다 \n    * 공개키로 암호화 하는 경우와 개인키로 암호화 하는것으로 구분\n    * 암호화할때의 키와 복호화할 때의 키 값이 다르면 비대칭 키라고 한다\n    \n\u003e CA에서 발급받은 인증서는 제 3자가 소유하고있는 사이트를 보장해준다는 의미\n\u003e 즉 데이터가 안전하게 암호화 되어 전송되고 있다는 뜻이다\n\n\u003e 구글에서는 공식적으로 Search eninge ranking 이라는 항목으로 `https 암호화`를 적용시 `상위 검색순위`에 들어가게 됨으로 꼭 https를 적용시키자 \n[SEO 체크리스트 공식문서](https://g.co/WebmasterChecklist)\n\n![image](https://user-images.githubusercontent.com/56494905/161895465-1bbe2acc-ff94-49d4-a594-b92d0292f58c.png){:width=\"50%\"}\n\n\n\n## 인증서(Certificate)  \n- CA(Certificate authorities) 기관의 종류\n    - 무료\n        * Let's Encrypt\n        * WoSign \n        * AWS Certificate \n        * CloudFlare SSL \n \n     - 유료\n        * Verisign\n        * GoDaddy\n        * GlobalSign\n        * Comodo(Sectigo)  \n        * Thawte  \n        * GeoTrust \n        * DigiCert  \n\n    * 실제로 적용된 사례\n    \n        ![image](https://user-images.githubusercontent.com/56494905/161885376-8022a886-fc79-46c9-a073-6839952e2fbe.png){:width=\"50%\"}\n        \n        ![image](https://user-images.githubusercontent.com/56494905/161917519-916e0d93-6011-46fb-8bf2-16c6d19fdc3f.png){:width=\"50%\"}\n    \u003e 각자브라우져에 자물쇠 부분을 클릭해서 Certificate 부분을 보면 도메인의 소유자의 대한 내용이 상세히 나온다 즉 SSL이 적용된 사례라고 볼 수 있다\n\n\n## 인증서 구매 및 셋팅\n\n- CA 사이트에서 구매 후 \n\n    ![image](https://user-images.githubusercontent.com/56494905/161897304-cb440634-2169-43b8-8228-accd707c9341.png){:width=\"50%\"}\n\n- 도메인 내용 입력장면\n\n    ![image](https://user-images.githubusercontent.com/56494905/161897397-47589b99-6113-468a-85dc-944d5b5a3828.png){:width=\"50%\"}\n\n- 생성된 private key\n\n    ![image](https://user-images.githubusercontent.com/56494905/161899159-9c07101d-e829-4562-a127-9c465263dd74.png){:width=\"50%\"}\n- cludeflare.com의 certificate의 정보\n    * 도메인 네임이 인증되어있고 어떤 내용으로 발생되었는지\n    * 어떤 사람, 기관, 기종에서 발생되었는지\n    * 발급한 인증기관\n    * 인증기관의 디지털 서명\n    * 관련된 서브 도메인들\n    * 인증날짜\n    * 만료날짜\n    * Public 키 \n        \n    ![image](https://user-images.githubusercontent.com/56494905/161919187-83ea6c6e-8a84-4839-88a5-a213005fe8ec.png){:width=\"50%\"}\n \n\n- 인증기관의 등록 절차가 모두 완료 후 아래와 같은 4가지 키 와 인증서를 받게 된다\n    * ssl.key : 서버쪽 비공개키\n    * ssl.crt : 디지털 인증서\n    * ca.pem : ROOT CA 인증서\n    * sub.class1.server.ca.pem : 중계자 인증서\n\n- Apache 또는 Nginx 또는 Node.js 에 설치\n    ... 생략[나중에...]\n        \n\n\n\n## SSL 작동원리\n* 작동원리 \n    1. 핸드쉐이크를 통한 서버 인증 확인 절차\n    2. 절차 완료 후 클라이언트와 서버 둘다 세션 획득 성공 \n    3. 대칭 암호화 데이터 전송(세션 키를 이용해서) \n\n* 알아야할 개념 \n    1. 대칭 키 알고리즘(Symmetric-key algorithm)\n    2. 비 대칭 키 암호\n    3. 인증서(certificate) \n    4. CA (Certificate authority)\n    5. 핸드쉐이크(3way Handshake)\n    6. 암호화 알고리즘 (RSA 기타 등등...)\n\n\n\u003c!--\n- 대칭 키 암호(Symmetric-key algorithm)\n    * 암호화 할때 같은 암호키를 쓰는 것\n\n- 공개 키(public key)\n    * 모든 사람이 언제든지 키를 공유함\n    \n- 비공개 키(private key)\n    * 어떠한 방식으로 키를 조심스럽게 다름사람한테 보내야 한다\n\n- 공개키와 비공개키(대칭키) \n    * 실제 데이터 -\u003e `대칭 키(비공개키)`\n    * 대칭 키(비공개 키) -\u003e `공개키`\n    \n\u003e 실제 데이터를 대칭키로 암호화 한 후, 다시 그 키를 공개키로 암호화 한다\n--\u003e\n\n### SSL Handshake를 통한 서버 인증 확인 절차\n\n- SSL Handshake의 전체적인 흐름도\n\n    ![image](https://user-images.githubusercontent.com/56494905/161886749-b3359817-3331-41c7-8505-ec0222642733.png){:width=\"100%\"}\n\n- SSL Handshake RSA key 교환방식 알고리즘을 사용한 순서도표\n\n    ![image](https://user-images.githubusercontent.com/56494905/162109026-5095b356-4443-46a3-bde1-9802f498321e.png)\n\n\u003c!--\n| 순서 | 포함된 데이터                                                | 클라이언트                           | 방향성  | 서버                                           | 일어나는 일                                                                                                             |\n| :-:  | :-:                                                          | :-:                                  | :-:     | :-:                                            | :-:                                                                                                                     |\n| 1    | TLS version, the ciper suites, client random                 | \"hello\" 메세지를 서버에 보낸다       | --|                                                | 클라이언트가 서버에 접속한다. 사용할 수 있는 알고리즘을 서버로 보낸다, 이미 세션 아이디가 있다면 기존 세션키를 확인한다 |\n| 2    | SSL certificate, server's chosen cipher suite, server random |                                      | \u003c-----  | \"hello\"에 다시 인증서를 넣고 클라이언트로 보냄 |                                                                                                                         |\n| 3    | premaster secret                                             | 공개키로 암호화한 키를 서버로 보낸다 | --|                                                | 공개키는 인증서에 포함되어 있음, 인증서를 브라우져 안에 있는 CA list와 대조하여 확인                                    |\n| 4    |                                                              |                                      |         | 비공개키로 premaster secret 을 다시 복호화     | pre master key -\u003e master key 로 복호화                                                                                  |\n| 5    | session key                                                  | 세선키를 생성                        |         | 세션키를 생성                                  | 각자 서로 공유한 client random, server random을 가지고 session key를 생성                                               |\n| 6    | finished                                                     | finished를 서버에 보냄               | \u003c-| finished를 클라이언트에 보냄                   | 서로 finished가 보내서 확인함 (세션키를 이용하여 최종 연결완료)                                                         |\n\n--\u003e\n\n### 세션(데이터 전송 준비완료)\n* 마지막으로 대칭 키가 준비가 완료\n* 세션키를 가지고 암호화 한다음 데이터를 전송\n\n\n\n# 7 가지 Man-in-the-middle attack \n* IP spoofing\n    * 공격자가 IP 주소를 변형시켜 일반적인 클라이언트인척 속인 후 서버에 접속해서 추적을 피하는 해킹 기법이다 \n* DNS spoofing\n    * 공격자는 금융기관등의 사이트와 동일한 사이트를 만들어 강제로 가짜 사이트로 이동하게 하는 방식이다\n* HTTPS spoofing\n    * 링크주소는 https로 되어 있지만 사실 링크된 사이트는 http로 된 사이트로 연결되어 클라이언트의 정보를 뺴는 방식\n* SSL hijacking\n    * http로 된 URL에 접속할때 공격자가 설정해 놓은 SSL 서버에 접속을 유도하여 클라이언트와 서버 중간에서 데이터를 가로채는 공격방식\n* Email hijacking\n    * 금융기관을 사칭한 사이트로 접속을 유도하여 사용자 정보를 빼는 방식\n* Wi-fi eavesdropping\n    * 공공 wifi를 사용하면 공격자가 router에 연결된 디바이스의 패킷 정보를 모니터 할 수 있다.\n* Stealing browser cookies\n    * 쿠키 탈취는 클라이언트 내부에 저장된 개인정보가 탈취되는 것을 말한다\n    \n\u003e https 로 미리 암호화된 상태로 연결되었다면 데이터가 `중간에 탈취`되더라도 `세션키로 암호화` 되어 있어서 좀더 안전할 수가 있다. \n\u003e\u003e 단 좀비 컴퓨터를 이용해 여러대의 컴퓨터가 한곳을 집중적으로 공격하는 DDOS 공격에는 https는 도움이 안된다.\n\n\n\n# 결론\n\n\u003e 랜선을 타고 다니는 모든 데이터는 안전하지 않다\n\u003e\u003e 다만 이중 삼중으로 암호화시 좀더 보안성이 향상 된다\n\u003e\u003e 따라서 `https`는 선택이 아닌 `필수`다\n\n\n# 참고사이트\n* [모질라 공식사이트](https://developer.mozilla.org/ko/docs/Web/HTTP/Overview)\n* [http 상태코드](http://www.iana.org/assignments/http-status-codes/http-status-codes.xhtml)\n* [Cloudflare](https://www.cloudflare.com/learning/ssl/what-is-ssl/)\n* [링크](https://wayhome25.github.io/cs/2018/03/11/ssl-https/)\n* [Mozila - ChiperSuite](https://wiki.mozilla.org/Security/Server_Side_TLS#Recommended_Ciphersuite)\n* [Norton](https://us.norton.com/internetsecurity-wifi-what-is-a-man-in-the-middle-attack.html)\n\n# 주석\n[^protocol]:  프로토콜은 컴퓨터 내부에서, 또는 컴퓨터 사이에서 데이터의 교환 방식을 정의하는 규칙 체계이다. 기기 간 통신은 교환되는 데이터의 형식에 대해 상호 합의를 요구한다. 이런 형식을 정의하는 규칙의 집합을 프로토콜이라고 한다. \n[^statuscode]: http 반환코드: 클라이언트의 데이터 요청에 따른 서버 반환 코드\n[^handshake]: 프로토콜(protocol): 서버와 클라이언트의 소통 과정을 나타낸다. \n[^SYC]: 동기화(Synchronization  )\n[^ACK]: 승인(Acknowledgement) \n[^symmetric-key-algorithm]: 대칭키 암호(symmetric-key algorithm) 암호화 알고리즘의 한 종류로, 암호화와 복호화에 같은 암호 키를 쓰는 알고리즘을 의마한다.\n[^personal-information]: Personal information : 어떤 사람의 자세한 정보 즉 이름, 주소 기기정보, 계정정보 및 암호 등이다\n"])</script><script>self.__next_f.push([1,"7:[\"$\",\"$Lf\",null,{\"content\":\"$10\",\"frontMatter\":{\"title\":\"HTTPS/SSL\",\"description\":\"$undefined\",\"tags\":[\"데이터 프라이버시\",\"HTTP\",\"HTTPS\",\"SSL\",\"TLS\"],\"date\":\"2022-03-23 21:59:10 +0900\"}}]\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\nb:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Your Blog Title\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Your blog description\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"9:null\n"])</script></body></html>